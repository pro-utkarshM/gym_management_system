{"ast":null,"code":"// routes/students.js\nconst express = require('express');\nconst router = express.Router();\nconst Student = require('');\n\n// Route to get all students with count aggregation and sorting\nrouter.get('/students', async (req, res) => {\n  try {\n    // Aggregation to count students per year\n    const students = await Student.aggregate([{\n      $group: {\n        _id: \"$year\",\n        count: {\n          $sum: 1\n        },\n        students: {\n          $push: \"$$ROOT\"\n        }\n      }\n    }, {\n      $sort: {\n        count: -1\n      } // Sort by count in descending order\n    }]);\n    res.json(students);\n  } catch (error) {\n    console.error('Error fetching students:', error);\n    res.status(500).send('Error fetching students');\n  }\n});\nmodule.exports = router;","map":{"version":3,"names":["express","require","router","Router","Student","get","req","res","students","aggregate","$group","_id","count","$sum","$push","$sort","json","error","console","status","send","module","exports"],"sources":["D:/gym-project/frontend/src/pages/StudentList.js"],"sourcesContent":["// routes/students.js\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst Student = require('');\r\n\r\n// Route to get all students with count aggregation and sorting\r\nrouter.get('/students', async (req, res) => {\r\n  try {\r\n    // Aggregation to count students per year\r\n    const students = await Student.aggregate([\r\n      {\r\n        $group: {\r\n          _id: \"$year\",\r\n          count: { $sum: 1 },\r\n          students: { $push: \"$$ROOT\" }\r\n        }\r\n      },\r\n      {\r\n        $sort: { count: -1 } // Sort by count in descending order\r\n      }\r\n    ]);\r\n\r\n    res.json(students);\r\n  } catch (error) {\r\n    console.error('Error fetching students:', error);\r\n    res.status(500).send('Error fetching students');\r\n  }\r\n});\r\n\r\nmodule.exports = router;\r\n"],"mappings":"AAAA;AACA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGF,OAAO,CAACG,MAAM,CAAC,CAAC;AAC/B,MAAMC,OAAO,GAAGH,OAAO,CAAC,EAAE,CAAC;;AAE3B;AACAC,MAAM,CAACG,GAAG,CAAC,WAAW,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC1C,IAAI;IACF;IACA,MAAMC,QAAQ,GAAG,MAAMJ,OAAO,CAACK,SAAS,CAAC,CACvC;MACEC,MAAM,EAAE;QACNC,GAAG,EAAE,OAAO;QACZC,KAAK,EAAE;UAAEC,IAAI,EAAE;QAAE,CAAC;QAClBL,QAAQ,EAAE;UAAEM,KAAK,EAAE;QAAS;MAC9B;IACF,CAAC,EACD;MACEC,KAAK,EAAE;QAAEH,KAAK,EAAE,CAAC;MAAE,CAAC,CAAC;IACvB,CAAC,CACF,CAAC;IAEFL,GAAG,CAACS,IAAI,CAACR,QAAQ,CAAC;EACpB,CAAC,CAAC,OAAOS,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;IAChDV,GAAG,CAACY,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,yBAAyB,CAAC;EACjD;AACF,CAAC,CAAC;AAEFC,MAAM,CAACC,OAAO,GAAGpB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}